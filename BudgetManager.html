<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../main.css">
    <title>Budget Manager - Budget & Expenditure System</title>
</head>
<body>
    <div class="full_page">
        <!-- Navigation Bar -->
        <div class="nav_bar">
            <div>
                <img src="./Logo.jpg" alt="System Logo">
            </div>
            <nav>
                <ul>
                    <li><a href="#">HOME</a></li>
                    <li><a href="#">BUDGET ENTRY</a></li>
                    <li><a href="#">EXPENDITURE LOG</a></li>
                    <li><a href="#">REPORTS</a></li>
                    <li><a href="#">BUDGET MANAGER</a></li>
                    <li><button class="logout_btn" onclick="location.href='./logout.html'" style="width: auto;">Log Out</button></li>
                </ul>
            </nav>
        </div>

        <!-- Budget Manager Panel -->
        <div class="manager_panel">
            <h1>Budget Manager Dashboard</h1>

            <!-- Budget Allocation Section -->
            <div class="section">
                <h2>Allocate Budget</h2>
                <form action="/allocateBudget" method="POST" class="input_group_budget">
                    <input type="text" class="input_field" name="department" placeholder="Department/Project" required>
                    <input type="number" class="input_field" name="amount" placeholder="Budget Amount" required>
                    <input type="date" class="input_field" name="start_date" placeholder="Start Date" required>
                    <input type="date" class="input_field" name="end_date" placeholder="End Date" required>
                    <textarea class="input_field" name="description" placeholder="Budget Description" required></textarea>
                    <button type="submit" class="submit_btn">Allocate Budget</button>
                </form>
            </div>

            <!-- View and Approve Budget Requests -->
            <div class="section">
                <h2>Approve Budget Requests</h2>
                <table class="budget_table">
                    <tr>
                        <th>Request ID</th>
                        <th>Department/Project</th>
                        <th>Requested Amount</th>
                        <th>Requested By</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                    <!-- This part should be dynamically populated with budget requests from the database -->
                    <tr>
                        <td>001</td>
                        <td>IT Department</td>
                        <td>$50,000</td>
                        <td>John Doe</td>
                        <td>Pending</td>
                        <td>
                            <button class="approve_btn" onclick="approveRequest('001')">Approve</button>
                            <button class="reject_btn" onclick="rejectRequest('001')">Reject</button>
                        </td>
                    </tr>
                    <!-- End dynamic section -->
                </table>
            </div>

            <!-- View Allocated Budgets -->
            <div class="section">
                <h2>View Allocated Budgets</h2>
                <table class="allocated_budget_table">
                    <tr>
                        <th>Budget ID</th>
                        <th>Department/Project</th>
                        <th>Allocated Amount</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Status</th>
                    </tr>
                    <!-- This part should be dynamically populated with allocated budgets -->
                    <tr>
                        <td>101</td>
                        <td>Marketing Department</td>
                        <td>$75,000</td>
                        <td>2024-01-01</td>
                        <td>2024-12-31</td>
                        <td>Active</td>
                    </tr>
                    <!-- End dynamic section -->
                </table>
            </div>
        </div>
    </div>

    <!-- JavaScript for Budget Manager actions -->
    <script>
        function approveRequest(requestId) {
            if (confirm('Are you sure you want to approve this budget request?')) {
                // Call backend to approve the request
                window.location.href = `/approveRequest?id=${requestId}`;
            }
        }

        function rejectRequest(requestId) {
            if (confirm('Are you sure you want to reject this budget request?')) {
                // Call backend to reject the request
                window.location.href = `/rejectRequest?id=${requestId}`;
            }
        }
    </script>
</body>
</html>
